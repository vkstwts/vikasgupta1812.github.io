
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>RMySQL</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=7c0c3ad0b3">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic%7COpen+Sans:700,400">

    <link rel="canonical" href="index.html">
    
    <meta property="og:site_name" content="Data Science and Machine Learning">
    <meta property="og:type" content="article">
    <meta property="og:title" content="RMySQL">
    <meta property="og:description" content='RMySQL   library(RMySQL)   Connect to the database   ucscDb &amp;lt;- dbConnect(MySQL(),user="genome",                       host="genome-mysql.cse.ucsc.edu") result &amp;lt;- dbGetQuery(ucscDb,"show databases;"); dbDisconnect(ucscDb);   ## [1] TRUE See the databases returned from previous query   result[1:20...'>
    <meta property="og:url" content="http://localhost:2368/rmysql/">
    <meta property="article:published_time" content="2014-11-23T20:29:22.785Z">
    <meta property="article:modified_time" content="2014-11-23T20:30:44.815Z">
    <meta property="article:tag" content="Rstats">
    <meta property="article:tag" content="Coursera">
    <meta property="article:tag" content="MySQL">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="RMySQL">
    <meta name="twitter:description" content='RMySQL   library(RMySQL)   Connect to the database   ucscDb &amp;lt;- dbConnect(MySQL(),user="genome",                       host="genome-mysql.cse.ucsc.edu") result &amp;lt;- dbGetQuery(ucscDb,"show databases;"); dbDisconnect(ucscDb);   ## [1] TRUE See the databases returned from previous query   result[1:20...'>
    <meta name="twitter:url" content="http://localhost:2368/rmysql/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Data Science and Machine Learning",
    "author": {
        "@type": "Person",
        "name": "Vikas Gupta",
        "url": "http://localhost:2368/author/vikas",
        "sameAs": null
    },
    "headline": "RMySQL",
    "url": "http://localhost:2368/rmysql/",
    "datePublished": "2014-11-23T20:29:22.785Z",
    "dateModified": "2014-11-23T20:30:44.815Z",
    "keywords": "Rstats, Coursera, MySQL",
    "description": "RMySQL   library(RMySQL)   Connect to the database   ucscDb &amp;lt;- dbConnect(MySQL(),user=&quot;genome&quot;,                       host=&quot;genome-mysql.cse.ucsc.edu&quot;) result &amp;lt;- dbGetQuery(ucscDb,&quot;show databases;&quot;); dbDisconnect(ucscDb);   ## [1] TRUE See the databases returned from previous query   result[1:20..."
}
    </script>

    <meta name="generator" content="Ghost 0.5">
    <link rel="alternate" type="application/rss+xml" title="Data Science and Machine Learning" href="../rss/index.html">
</head>
<body class="post-template tag-rstats tag-coursera tag-mysql">

    


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="back-button icon-arrow-left" href="../">Home</a>
        <a class="subscribe-button icon-feed" href="../rss/index.rss">Subscribe</a>
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-rstats tag-coursera tag-mysql">

        <header class="post-header">
            <h1 class="post-title">RMySQL</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2014-11-23">23 November 2014</time>  on <a href="../tag/rstats/">Rstats</a>, <a href="../tag/coursera/">Coursera</a>, <a href="../tag/mysql/">MySQL</a>
            </section>
        </header>

        <section class="post-content">
            <h1 id="rmysql">RMySQL  </h1>

<pre><code class="language-r">library(RMySQL)  
</code></pre>

<p>Connect to the database  </p>

<pre><code class="language-r">ucscDb &lt;- dbConnect(MySQL(),user="genome",  
                    host="genome-mysql.cse.ucsc.edu")
result &lt;- dbGetQuery(ucscDb,"show databases;"); dbDisconnect(ucscDb);  
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<p>See the databases returned from previous query  </p>

<pre><code class="language-r">result[1:20,]  
</code></pre>

<pre><code>##  [1] "information_schema" "ailMel1"            "allMis1"           
##  [4] "anoCar1"            "anoCar2"            "anoGam1"           
##  [7] "apiMel1"            "apiMel2"            "aplCal1"           
## [10] "balAcu1"            "bosTau2"            "bosTau3"           
## [13] "bosTau4"            "bosTau5"            "bosTau6"           
## [16] "bosTau7"            "bosTauMd3"          "braFlo1"           
## [19] "caeJap1"            "caePb1"
</code></pre>

<p>Connect to the <code>hg19</code> database  </p>

<pre><code class="language-r">hg19 &lt;- dbConnect(MySQL(),user="genome", db="hg19",  
                    host="genome-mysql.cse.ucsc.edu")
allTables &lt;- dbListTables(hg19)  
length(allTables)  
</code></pre>

<p>Number of tables in this database  </p>

<pre><code>## [1] 11015
</code></pre>

<p>First 5 tables.  </p>

<pre><code class="language-r">allTables[1:5]  
</code></pre>

<pre><code>## [1] "HInv"         "HInvGeneMrna" "acembly"      "acemblyClass"
## [5] "acemblyPep"
</code></pre>

<p>Get the columns(fields) of the <code>affyU133Plus2</code> table</p>

<pre><code class="language-r">dbListFields(hg19,"affyU133Plus2")  
</code></pre>

<pre><code>##  [1] "bin"         "matches"     "misMatches"  "repMatches"  "nCount"     
##  [6] "qNumInsert"  "qBaseInsert" "tNumInsert"  "tBaseInsert" "strand"     
## [11] "qName"       "qSize"       "qStart"      "qEnd"        "tName"      
## [16] "tSize"       "tStart"      "tEnd"        "blockCount"  "blockSizes" 
## [21] "qStarts"     "tStarts"
</code></pre>

<p>Get the number of rows from the table</p>

<pre><code class="language-r">dbGetQuery(hg19, "select count(*) from affyU133Plus2")  
</code></pre>

<pre><code>##   count(*)
## 1    58463
</code></pre>

<p>Get first few rows of the table. </p>

<pre><code class="language-r">affyData &lt;- dbReadTable(hg19, "affyU133Plus2")  
head(affyData)  
</code></pre>

<pre><code>##   bin matches misMatches repMatches nCount qNumInsert qBaseInsert tNumInsert tBaseInsert strand        qName qSize qStart qEnd tName     tSize tStart  tEnd blockCount                                                                 blockSizes                                                                                                qStarts                                                                                                                                    tStarts
## 1 585     530          4          0     23          3          41          3         898      -  225995_x_at   637      5  603  chr1 249250621  14361 15816          5                                                          93,144,229,70,21,                                                                                    34,132,278,541,611,                                                                                                             14361,14454,14599,14968,15795,
## 2 585    3355         17          0    109          9          67          9       11621      -  225035_x_at  3635      0 3548  chr1 249250621  14381 29483         17              73,375,71,165,303,360,198,661,201,1,260,250,74,73,98,155,163,                        87,165,540,647,818,1123,1484,1682,2343,2545,2546,2808,3058,3133,3206,3317,3472,                                     14381,14454,14969,15075,15240,15543,15903,16104,16853,17054,17232,17492,17914,17988,18267,24736,29320,
## 3 585    4156         14          0     83         16          18          2          93      -  226340_x_at  4318      3 4274  chr1 249250621  14399 18745         18                 690,10,32,33,376,4,5,15,5,11,7,41,277,859,141,51,443,1253,                   44,735,746,779,813,1190,1195,1201,1217,1223,1235,1243,1285,1564,2423,2565,2617,3062,                               14399,15089,15099,15131,15164,15540,15544,15549,15564,15569,15580,15587,15628,15906,16857,16998,17049,17492,
## 4 585    4667          9          0     68         21          42          3        5743      - 1557034_s_at  4834     48 4834  chr1 249250621  14406 24893         23 99,352,286,24,49,14,6,5,8,149,14,44,98,12,10,355,837,59,8,1500,133,624,58, 0,99,452,739,764,814,829,836,842,851,1001,1016,1061,1160,1173,1184,1540,2381,2441,2450,3951,4103,4728, 14406,20227,20579,20865,20889,20938,20952,20958,20963,20971,21120,21134,21178,21276,21288,21298,21653,22492,22551,22559,24059,24211,24835,
## 5 585    5180         14          0    167         10          38          1          29      -    231811_at  5399      0 5399  chr1 249250621  19688 25078         11                                       131,26,1300,6,4,11,4,7,358,3359,155,                                                     0,132,159,1460,1467,1472,1484,1489,1497,1856,5244,                                                                         19688,19819,19845,21145,21151,21155,21166,21170,21177,21535,24923,
## 6 585     468          5          0     14          0           0          0           0      -    236841_at   487      0  487  chr1 249250621  27542 28029          1                                                                       487,                                                                                                     0,                                                                                                                                     27542,
</code></pre>

<pre><code class="language-r">query &lt;- dbSendQuery(hg19, "select * from affyU133Plus2 where misMatches between 1 and 3")  
affyMis &lt;- fetch(query); quantile(affyMis$misMatches)  
</code></pre>

<pre><code>##   0%  25%  50%  75% 100% 
##    1    1    2    2    3
</code></pre>

<p>define number of rows to extract.</p>

<pre><code class="language-r">affyMisSmall &lt;- fetch(query,n=10); dbClearResult(query);  
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<p>Dimensions of the result set</p>

<pre><code class="language-r">dim(affyMisSmall)  
</code></pre>

<pre><code>## [1] 10 22
</code></pre>

<p>Dont forget to disconnect the database. </p>

<pre><code class="language-r">dbDisconnect(hg19)  
</code></pre>

<pre><code>## [1] TRUE
</code></pre>
        </section>

        <footer class="post-footer">



            <section class="author">
                <h4><a href="http://localhost:2368/author/vikas/">Vikas Gupta</a></h4>

                    <p>Read <a href="http://localhost:2368/author/vikas/">more posts</a> by this author.</p>
                <div class="author-meta">
                    
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/share?text=RMySQL&amp;url=http://localhost:2368/rmysql/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:2368/rmysql/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://localhost:2368/rmysql/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>

    </article>

</main>



    <footer class="site-footer clearfix">
         <section class="copyright"><a href="../">Data Science and Machine Learning</a> © 2014</section>
         <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
    </footer>

    <script src="../public/jquery.js?v=7c0c3ad0b3"></script>

    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=7c0c3ad0b3"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=7c0c3ad0b3"></script>

</body>
